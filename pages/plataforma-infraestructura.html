<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Plataforma de La Brújula</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <link rel="stylesheet" href="../css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>


<body>
    <header class="p-3 text-bg-dark">
        <div class="container">
            <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start"> <a
                    href="#" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none"> <img
                        class="bi me-2" width="40" height="40" role="img" aria-label="La Brújula"
                        src="../assets/img/logo-base.png"></img>
                </a>
                <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
                    <li><a href="../index.html" class="nav-link px-2 text-secondary">La Brújula</a></li>
                    <li><a href="./metodologia.html" class="nav-link px-2 text-white">Metodología</a></li>
                    <li><a href="#" class="nav-link px-2 text-white">Plataforma</a></li>
                    <li><a href="#" class="nav-link px-2 text-white">Observatorio</a></li>
                    <li><a href="./contacto.html" class="nav-link px-2 text-white">Contacto</a></li>
                </ul>
                <form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3" role="search"> <input type="search"
                        class="form-control form-control-dark text-bg-dark" placeholder="Search..." aria-label="Search">
                </form>
                <div class="text-end"> <button type="button" class="btn btn-outline-light me-2">Iniciar sesión</button>
                    <button type="button" class="btn btn-warning">Registrarse</button>
                </div>
            </div>
        </div>
    </header>
    <main>
        <div class="container">
            <h2 class="titulo-plataforma">PLATAFORMA DE LA BRÚJULA</h2>
        </div>
        <div class="container">
            <div class="container">
                <nav aria-label="...">
                    <ul class="pagination justify-content-between">
                        <li class="page-item"><a href="./plataforma-vivienda-suelo.html" class="page-link">VIVIENDA Y
                                SUELO</a></li>
                        <li class="page-item active"><a class="page-link" href="#"
                                aria-current="page">INFRAESTRUCTURAS</a></li>
                        <li class="page-item"><a class="page-link"
                                href="./plataforma-equipamiento.html">EQUIPAMIENTOS</a></li>
                        <li class="page-item"><a class="page-link"
                                href="./plataforma-accesibilidad.html">ACCESIBILIDAD</a></li>
                        <li class="page-item"><a class="page-link"
                                href="./plataforma-sostenibilidad.html">SOSTENIBILIDAD</a></li>
                    </ul>
                </nav>
            </div>
            <div class="container">
                <h3>Departamento de Santa María</h3>
                <p>Seleccionar el área de interés.</p>
            </div>
            <div class="container">
                <select class="form-select form-select-sm" aria-label="Small select example">
                    <option value="1">Localidad cabecera de Santa María</option>
                    <option value="2">Localidad cabecera de San José</option>
                </select>
            </div>
            <div class="container">
                <hr>
            </div>
            <div class="container">
                <h3>Gráfico de La Brújula según variable</h3>
                <p>Seleccionar la variable de interés.</p>
                <select class="form-select form-select-sm" aria-label="Small select example" id="selector"></select>
                <div class="bloque-grafico">
                    <div class="valores">
                        <p><strong>VALORES ESPECÍFICOS</strong></p>
                        <div id="resultado"></div>
                        <p><strong>VALORES TOTALES</strong></p>
                        <div id="valores-totales"></div>
                    </div>
                    <div>
                        <p><strong>GRÁFICO DE LA BRÚJULA</strong></p>
                        <canvas id="grafico" width="800" height="200"></canvas>
                    </div>
                </div>
            </div>
            <div class="container">
                <hr>
            </div>
            <div class="container">
                <h3>Espacialización de resultados</h3>
                <p>Provisión de agua potable disponible.</p>
            </div>
            <div class="container">
            <iframe src="./mapa.html" width="100%" height="600px" style="border:none;"></iframe>
        </div>
            <div class="container">
                <hr>
            </div>
            <div class="container">
                <h3>Matriz de resultados ponderados de la dimensión de infraestructura</h3>
                <table class="table table-striped table-hover" id="tabla">
                    <thead>
                        <tr>
                            <th>Variable</th>
                            <th>Derechos</th>
                            <th>Organización social</th>
                            <th>Obras públicas</th>
                            <th>Normativa</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
            <div class="container">
                <hr>
            </div>
            <div class="container">
                <h3>Conclusiones</h3>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Asperiores perspiciatis nulla nobis similique facere quis? Minima quia at officia voluptatibus atque, blanditiis, officiis pariatur beatae distinctio rem porro mollitia dolorem.</p>
                <br>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Asperiores perspiciatis nulla nobis similique facere quis? Minima quia at officia voluptatibus atque, blanditiis, officiis pariatur beatae distinctio rem porro mollitia dolorem.</p>
                <br>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Asperiores perspiciatis nulla nobis similique facere quis? Minima quia at officia voluptatibus atque, blanditiis, officiis pariatur beatae distinctio rem porro mollitia dolorem.</p>
            </div>
    </main>
    <div class="container">
        <footer class="d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top">
            <div class="col-md-4 d-flex align-items-center"> <a href="../index.html"
                    class="mb-3 me-2 mb-md-0 text-body-secondary text-decoration-none lh-1" aria-label="La Brújula">
                    <img class="bi" width="24" height="24" src="../assets/img/logo-base.png">
                    </img> </a> <span class="mb-3 mb-md-0 text-body-secondary">© 2025 La Brújula</span> </div>
            <ul class="nav col-md-4 justify-content-end list-unstyled d-flex">
                <li><a href="#"><img width="30" height="30" src="../assets/icons/linkedin.png" alt="Linkedin"></a></li>
                <li><a href="#"><img width="30" height="30" src="../assets/icons/x.png" alt="X"></a></li>
                <li><a href="#"><img width="30" height="30" src="../assets/icons/youtube.png" alt="Youtube"></a></li>
            </ul>
        </footer>

        <script>
            let chart = null;

            fetch('../json/data.json')
                .then(response => response.json())
                .then(data => {
                    const selector = document.getElementById('selector');
                    const resultadoDiv = document.getElementById('resultado');
                    const tbody = document.querySelector('#tabla tbody');
                    const ctx = document.getElementById('grafico').getContext('2d');

                    // Crear tabla y selector
                    data.forEach(row => {
                        if (row.Variable !== "Total") {
                            const option = document.createElement('option');
                            option.value = row.Variable;
                            option.textContent = row.Variable;
                            selector.appendChild(option);
                        }
                        // Mostrar valores totales
                        const filaTotal = data.find(row => row.Variable === "Total");
                        if (filaTotal) {
                            const divTotales = document.getElementById('valores-totales');
                            divTotales.innerHTML = `
        <ul>
            <li><strong>Derechos:</strong> ${filaTotal.Derechos}/25</li>
            <li><strong>Organización social:</strong> ${filaTotal["Organización social"]}/25</li>
            <li><strong>Obras públicas:</strong> ${filaTotal["Obras públicas"]}/25</li>
            <li><strong>Normativa:</strong> ${filaTotal.Normativa}/25</li>
        </ul>
    `;
                        }

                        const tr = document.createElement('tr');
                        tr.innerHTML = `
            <td>${row.Variable}</td>
            <td>${row.Derechos}</td>
            <td>${row["Organización social"]}</td>
            <td>${row["Obras públicas"]}</td>
            <td>${row.Normativa}</td>
          `;
                        tbody.appendChild(tr);
                    });

                    function actualizarVista(fila) {
                        resultadoDiv.innerHTML = `
            <ul>
              <li><strong>Derechos:</strong> ${fila.Derechos}/5</li>
              <li><strong>Organización social:</strong> ${fila["Organización social"]}/5</li>
              <li><strong>Obras públicas:</strong> ${fila["Obras públicas"]}/5</li>
              <li><strong>Normativa:</strong> ${fila.Normativa}/5</li>
            </ul>
          `;

                        const datosRadar = [
                            fila.Derechos,
                            fila["Normativa"],
                            fila["Organización social"],
                            fila["Obras públicas"]
                        ];

                        const etiquetas = ["DERECHOS", "NORMATIVA", "ORGANIZACIÓN SOCIAL", "OBRAS PÚBLICAS"];

                        if (chart) {
                            chart.data.datasets[0].data = datosRadar;
                            chart.data.datasets[0].label = fila.Variable; // Actualiza la leyenda
                            chart.update();
                        } else {
                            chart = new Chart(ctx, {
                                type: 'radar',
                                data: {
                                    labels: etiquetas,
                                    datasets: [{
                                        label: fila.Variable,
                                        data: datosRadar,
                                        backgroundColor: 'rgba(0, 123, 255, 0.2)',
                                        borderColor: 'rgba(0, 123, 255, 1)',
                                        pointBackgroundColor: 'rgba(0, 123, 255, 1)'
                                    }]
                                },
                                options: {
                                    scales: {
                                        r: {
                                            suggestedMin: 0,
                                            suggestedMax: 5,
                                            ticks: { stepSize: 1 }
                                        }
                                    }
                                }
                            });
                        }
                    }

                    // Evento de cambio
                    selector.addEventListener('change', (e) => {
                        const seleccion = e.target.value;
                        const fila = data.find(row => row.Variable === seleccion);
                        if (fila) actualizarVista(fila);
                    });

                    // Trigger inicial
                    selector.dispatchEvent(new Event('change'));
                });
        </script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
            integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
            crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.min.js"
            integrity="sha384-RuyvpeZCxMJCqVUGFI0Do1mQrods/hhxYlcVfGPOfQtPJh0JCw12tUAZ/Mv10S7D"
            crossorigin="anonymous"></script>
</body>

</html>